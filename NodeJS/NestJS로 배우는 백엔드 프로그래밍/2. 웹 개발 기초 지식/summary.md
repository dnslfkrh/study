## 웹 프레임워크

기술의 발전과 시간의 지남에 따라 웹 기술은 복잡도를 가지며 발전했으며, 필수적인 기술을 구현하는 데 점점 많은 노력이 필요해졌다. 이러한 점을 개선하기 위해 만들고 등장한 것이 웹 프레임워크이다.

프레임워크는 뼈대, 골조라는 뜻으로, 프레임워크에서 제시하는 방법을 이용해 효율적으로 애플리케이션을 구축할 수 있다.

</br>

## 웹 프레임워크 선택 시 고려할 수 있는 사항

- **개발 문서**: 쉽게 이해할 수 있게 잘 쓰인 개발 문서는 생산성을 올려준다.  
- **사용자 수, 활성 커뮤니티**: 사용자가 많다는 것은 프레임워크가 안정적이고 효과적이라는 뜻으로 해석할 수 있으며, 더욱 활발한 커뮤니티가 형성되어 개발에 도움을 받을 수 있다.

</br>

## NodeJS의 장단점

- **NodeJS의 장점**: 프론트엔드와 백엔드 모두 같은 언어로 개발할 수 있다.  
- **NodeJS의 단점**: 컴파일러 언어의 처리 속도에 비해 성능이 떨어진다.

</br>

## 멀티 스레딩

멀티 스레딩이란, 여러 요청이 한 번에 들어올 때 각 요청을 처리하기 위한 스레드를 만들고 할당하는 방식이다.

NodeJS는 싱글 스레드로 구동되지만, 백그라운드에서 스레드풀을 생성한다. 그렇기 때문에 개발자는 싱글 스레드에서 동작하는 것처럼 쉽고 간단한 코드를 작성할 수 있다.

싱글 스레드 이벤트 기반 비동기 방식은 서버 자원에 큰 부담을 주지 않는다. 하지만 스레드가 하나이기 때문에 문제가 발생하면 치명적이다.

</br>

## 이벤트 루프

이벤트 루프란, 시스템 커널에서 가능한 작업이 있다면 커널에 이관하는 기능이다.  
이벤트 루프 덕분에 NodeJS는 싱글 스레드 기반임에도 논블로킹 I/O 작업이 가능하다.

### 이벤트 루프의 6단계

1. **타이머 단계**  
   이벤트 루프의 시작 단계로, 타이머 단계의 큐에는 `setTimeout`, `setInterval`과 같은 함수로 만들어진 타이머를 큐에 넣고 실행한다. 타이머는 최소 힙을 관리된다. 이 단계에서는 최소 힙에 들어있는 타이머들을 순차적으로 찾아 실행 후 힙을 재구성한다.

2. **대기 콜백 단계**  
   이전에 완료된 일부 시스템 작업의 콜백을 실행한다. 이러한 작업은 주로 타이머와 무관하게 OS에서 완료된 작업들로, 파일 시스템 읽기/쓰기, DNS 조회, 네트워크 I/O 작업 등이 포함된다.

3. **유휴, 준비 단계**  
   유휴 단계는 틱(프로그램 실행 시 최소 간격)마다 실행된다. 준비 단계는 매 폴링 직전에 실행된다. 각 단계는 NodeJS의 내부 동작을 위한 것이다.

4. **폴 단계**  
   이벤트 루프 중 가장 중요한 단계이다. 새로운 I/O 이벤트를 가져와 관련 콜백을 수행한다. 소켓 연결과 같이 새로운 연결을 맺거나 데이터 처리를 받아들인다.

5. **체크 단계**  
   `setImmediate`의 콜백만을 위한 단계이다. 큐가 비거나 시스템 실행 한도에 도달할 때까지 콜백을 수행한다.

6. **종료 콜백 단계**  
   `close`, `destroy` 이벤트 타입의 콜백이 처리된다. 이벤트 루프는 종료 콜백 단계를 마치고 나면 다음 루프에서 작업이 남아있나 확인한다. 작업이 남아 있으면 타이머 단계부터 한 바퀴 더 돌고, 아니면 루프를 종료한다.

위 이벤트 루프 기능 덕분에 NodeJS는 단일 스레드임에도 비동기 처리를 할 수 있다.

</br>

## 패키지 의존성 관리

### 생성된 NodeJS 프로젝트 내 `package.json`의 역할

- 애플리케이션이 필요로 하는 패키지를 나열한다.  
- 시맨틱 버저닝 규칙으로 필요한 버전을 기술한다.  
- 다른 개발자와 같은 빌드 환경 구성을 가능하게 해준다.

</br>

## 시맨틱 버저닝 (Semantic Versioning, SemVer)

시맨틱 버저닝(유의적 버전)은 버전명을 숫자로 관리하는 방법이다.

### 규칙: `[Major].[Minor].[Patch]-[label]`

- **Major**: 이전 버전과 호환이 불가능할 때 숫자를 하나 증가시킨다.  
- **Minor**: 기능이 추가되는 경우 숫자를 증가시킨다. 하위 버전과의 호환성은 유지된다.  
- **Patch**: 버그 수정 패치를 적용할 때 사용한다.  
- **label**: 선택 사항이다. `pre`, `alpha`, `beta`와 같이 버전에 대한 설명이 필요한 경우 문자열로 작성한다.

</br>

## 버전 선택 규칙

항상 완전히 동일한 버전을 선택할 필요는 없다. 아래와 같은 규칙으로 의존성이 깨지지 않는 다른 버전을 선택할 수 있다.

- `ver`: 완전 일치하는 버전  
- `=ver`: 완전 일치하는 버전  
- `>ver`: 큰 버전  
- `>=ver`: 크거나 같은 버전  
- `<ver`: 작은 버전  
- `<=ver`: 작거나 같은 버전  
- `~ver`: 버전 범위
